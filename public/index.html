<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Luna Bot Web</title>
  <style>
    body { font-family: Arial; background: #111; color: #fff; text-align: center; }
    #chat { max-width: 500px; margin: auto; }
    .msg { padding: 8px; margin: 5px; border-radius: 6px; }
    .user { background: #444; text-align: right; }
    .bot { background: #222; text-align: left; }
    #avatar { width: 150px; border-radius: 50%; margin: 10px; }
  </style>
</head>
<body>
  <h1>ðŸŒ™ Luna Web Chat</h1>
  <img id="avatar" src="luna1.png" alt="Avatar">
  <div id="chat"></div>
  <input id="msg" placeholder="Type a message">
  <button onclick="sendMsg()">Send</button>

  <script>
    async function loadConfig() {
      const res = await fetch('/config');
      const cfg = await res.json();
      document.getElementById("avatar").src = cfg.globalAvatar || "luna1.png";
    }

    function appendMsg(text, cls) {
      const div = document.createElement("div");
      div.className = "msg " + cls;
      div.innerText = text;
      document.getElementById("chat").appendChild(div);
    }

    async function sendMsg() {
      const input = document.getElementById("msg");
      appendMsg(input.value, "user");
      setTimeout(() => appendMsg("Luna says: " + input.value, "bot"), 500);
      input.value = "";
    }

    loadConfig();
  </script>
</body>
</html>
