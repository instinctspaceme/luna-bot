<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Admin Panel</h1>

  <label>Avatar:</label>
  <select id="avatar-select"></select><br><br>

  <label>Voice:</label>
  <input id="voice" type="text" placeholder="e.g. alloy"><br><br>

  <label>Personality:</label>
  <input id="personality" type="text" placeholder="e.g. friendly"><br><br>

  <button id="save-btn">Save</button>

  <script>
    async function loadAvatars() {
      const res = await fetch("/avatars");
      const files = await res.json();
      const select = document.getElementById("avatar-select");
      files.forEach(f => {
        const opt = document.createElement("option");
        opt.value = f;
        opt.textContent = f;
        select.appendChild(opt);
      });
    }

    async function saveConfig() {
      const body = {
        avatar: document.getElementById("avatar-select").value,
        voice: document.getElementById("voice").value,
        personality: document.getElementById("personality").value
      };
      await fetch("/config", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(body)
      });
      alert("Saved!");
    }

    document.getElementById("save-btn").onclick = saveConfig;
    loadAvatars();
  </script>
</body>
</html>
